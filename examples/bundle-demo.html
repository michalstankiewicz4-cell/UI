<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>UI - Bundle Demo</title>
    <style>
        body { 
            margin: 0; 
            overflow: hidden; 
            background: #1a1a1a;
            font-family: 'Courier New', monospace;
        }
        canvas { 
            display: block; 
            cursor: default;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    
    <!-- Load the UI bundle -->
    <script src="../dist/ui.js"></script>
    
    <script>
        // ============================================
        //  UI BUNDLE DEMO
        // ============================================
        // This example uses the complete bundle (dist/ui.js)
        // All modules loaded as global UI object
        
        console.log('ðŸŽ‰ UI Bundle Demo Starting...');
        console.log('');
        
        // Check if UI is available
        if (typeof UI === 'undefined') {
            alert('âŒ UI bundle not loaded!\nMake sure dist/ui.js exists and is built.');
            throw new Error('UI bundle not found');
        }
        
        console.log('âœ… UI Bundle loaded!');
        console.log('ðŸ“¦ Available:', Object.keys(UI));
        console.log('');
        
        // Setup canvas
        const canvas = document.getElementById('canvas');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        const ctx = canvas.getContext('2d');
        
        // ============================================
        //  CREATE UI USING BUNDLE
        // ============================================
        
        // Create window manager
        const windowManager = new UI.WindowManager();
        
        // Create taskbar
        const taskbar = new UI.Taskbar();
        
        // Window 1: Welcome
        const welcomeWindow = new UI.BaseWindow(100, 100, 'ðŸŽ‰ Bundle Demo');
        welcomeWindow.addText('UI Bundle v1.0.0 dziaÅ‚a!', '#00FF88');
        welcomeWindow.addText(' ');
        welcomeWindow.addText('Ten przykÅ‚ad uÅ¼ywa dist/ui.js', '#00F5FF');
        welcomeWindow.addText('Wszystkie moduÅ‚y w jednym pliku!', '#00F5FF');
        welcomeWindow.addText(' ');
        
        let clickCount = 0;
        welcomeWindow.addButton('Kliknij Mnie!', () => {
            clickCount++;
            console.log(`KlikniÄ™to ${clickCount} razy!`);
            alert(`KlikniÄ™to ${clickCount} razy! ðŸŽ‰`);
        });
        
        windowManager.add(welcomeWindow);
        taskbar.addSection('windows');
        taskbar.addWindowItem('Welcome', welcomeWindow);
        
        // Window 2: Info
        const infoWindow = new UI.BaseWindow(450, 100, 'ðŸ“¦ Bundle Info');
        infoWindow.addSection('zawartoÅ›Ä‡');
        infoWindow.addText('âœ… Styles.js');
        infoWindow.addText('âœ… TextCache.js');
        infoWindow.addText('âœ… BaseWindow.js');
        infoWindow.addText('âœ… WindowManager.js');
        infoWindow.addText('âœ… Taskbar.js');
        infoWindow.addText('âœ… EventRouter.js');
        infoWindow.addText(' ');
        infoWindow.addSection('stats');
        infoWindow.addText('Total: ~1047 linii', '#00FF88');
        infoWindow.addText('Rozmiar: ~40KB', '#00FF88');
        
        windowManager.add(infoWindow);
        taskbar.addWindowItem('Bundle Info', infoWindow);
        
        // Window 3: Features
        const featuresWindow = new UI.BaseWindow(100, 350, 'âš¡ Features');
        featuresWindow.addText('âœ… Single file bundle');
        featuresWindow.addText('âœ… Zero dependencies');
        featuresWindow.addText('âœ… Pure vanilla JS');
        featuresWindow.addText('âœ… Draggable windows');
        featuresWindow.addText('âœ… Taskbar with menu');
        featuresWindow.addText('âœ… Event routing');
        featuresWindow.addText('âœ… Text caching');
        featuresWindow.addText(' ');
        featuresWindow.addButton('Add Window', () => {
            const newWindow = new UI.BaseWindow(
                Math.random() * 400 + 100,
                Math.random() * 200 + 100,
                `Window #${windowManager.windows.length + 1}`
            );
            newWindow.addText('Nowe okno stworzone!', '#00FF88');
            newWindow.addButton('Zamknij', () => {
                const idx = windowManager.windows.indexOf(newWindow);
                if (idx > -1) {
                    windowManager.windows.splice(idx, 1);
                }
            });
            windowManager.add(newWindow);
            taskbar.addWindowItem(`Window #${windowManager.windows.length}`, newWindow);
        });
        
        windowManager.add(featuresWindow);
        taskbar.addWindowItem('Features', featuresWindow);
        
        // Create event router
        const eventRouter = new UI.EventRouter(
            canvas,
            null, // no camera
            windowManager,
            taskbar,
            null  // no stats window
        );
        
        // ============================================
        //  RENDER LOOP
        // ============================================
        
        function render() {
            // Clear background
            ctx.fillStyle = '#1a1a1a';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw windows
            windowManager.draw(ctx, UI.STYLES);
            
            // Draw taskbar
            taskbar.draw(ctx, UI.STYLES, UI.measureTextCached);
            
            // Info text
            ctx.fillStyle = '#666666';
            ctx.font = '12px Courier New';
            ctx.fillText('ðŸŽ‰ UI Bundle Demo - dist/ui.js loaded!', 20, canvas.height - 60);
            ctx.fillText('PrzeciÄ…gnij okna, uÅ¼yj menu (MENU button), kliknij buttony!', 20, canvas.height - 40);
            ctx.fillText('Wszystkie moduÅ‚y w jednym pliku! ~1047 linii, ~40KB', 20, canvas.height - 20);
            
            requestAnimationFrame(render);
        }
        
        render();
        
        console.log('âœ… Render loop started!');
        console.log('ðŸŽ® Interact with windows!');
        console.log('');
        console.log('Features:');
        console.log('  - Drag windows by header');
        console.log('  - Click MENU button for taskbar');
        console.log('  - Click buttons in windows');
        console.log('  - Add new windows dynamically');
    </script>
</body>
</html>
